<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="ServiPuntos.Mobile.Views.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Iniciar Sesión"
    BackgroundColor="{DynamicResource Background}">

    <ContentPage.Resources>
        <Style x:Key="TenantNameStyle"
               TargetType="Label"
               BasedOn="{StaticResource HeadlineLabelStyle}">
            <Setter Property="TextColor"
                    Value="{DynamicResource PrimaryColor}"/>
        </Style>
    </ContentPage.Resources>

    <StackLayout
        Padding="{StaticResource PagePadding}"
        Spacing="{StaticResource DefaultSpacing}"
        VerticalOptions="Center">

        <Image
            x:Name="LogoImage"
            HeightRequest="64"
            HorizontalOptions="Center"
            Margin="0,0,0,12"
            Source="{Binding Tenant.LogoUrl}"/>

        <Label
            x:Name="TenantNameLabel"
            Text="{Binding Tenant.Name}"
            Style="{StaticResource TenantNameStyle}"
            Margin="0,0,0,24"/>

        <Entry
            Placeholder="Usuario"
            Text="{Binding Username}"
            Keyboard="Email"
            Style="{StaticResource DefaultEntryStyle}"/>

        <Entry
            Placeholder="Contraseña"
            Text="{Binding Password}"
            IsPassword="True"
            Style="{StaticResource DefaultEntryStyle}"/>

        <Label
            Text="{Binding ErrorMessage}"
            IsVisible="{Binding HasError}"
            Style="{StaticResource ErrorLabelStyle}"/>

        <Button
            Text="Iniciar sesión"
            Command="{Binding LoginCommand}"
            Style="{StaticResource PrimaryButtonStyle}"/>

        <Label
            Text="¿Aún no tienes cuenta? Regístrate aquí"
            Style="{StaticResource LinkLabelStyle}">
            <Label.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnRegisterTapped"/>
            </Label.GestureRecognizers>
        </Label>

        <Button
            x:Name="GoogleLoginButton"
            Text="Iniciar sesión con Google"
            Style="{StaticResource SecondaryButtonStyle}"
            Margin="0,12,0,0"
            Clicked="OnGoogleLoginClicked"/>
    </StackLayout>
</ContentPage>
