<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
        xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        x:Class="ServiPuntos.Mobile.Views.RedemptionPage"
        Title="Canjear Oferta">

        <!-- Padding y espaciado global vienen de Styles.xaml -->
        <StackLayout
                Padding="{StaticResource PagePadding}"
                Spacing="{StaticResource DefaultSpacing}">

                <!-- Etiqueta descriptiva -->
                <Label
                        Text="Selecciona una ubicación"
                        Style="{StaticResource Body}"/>

                <!-- Pickers con estilo reutilizable -->
                <Picker
                        ItemsSource="{Binding Locations}"
                        ItemDisplayBinding="{Binding Nombre}"
                        SelectedItem="{Binding SelectedLocation}"
                        Title="Ubicación"
                        Style="{StaticResource DefaultPickerStyle}"/>

                <Label
                        Text="Selecciona un producto"
                        Style="{StaticResource Body}"/>

                <Picker
                        ItemsSource="{Binding Products}"
                        ItemDisplayBinding="{Binding Nombre}"
                        SelectedItem="{Binding SelectedProduct}"
                        Title="Producto"
                        IsEnabled="{Binding Products.Count, Converter={StaticResource GreaterThanZeroConverter}}"
                        Style="{StaticResource DefaultPickerStyle}"/>

                <!-- Botón primario -->
                <Button
                        Text="Generar QR"
                        Command="{Binding GenerateCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        IsEnabled="{Binding GenerateCommand.CanExecute, Source={RelativeSource Self}}"/>

                <!-- Indicador de actividad centrado -->
                <ActivityIndicator
                        IsRunning="{Binding IsBusy}"
                        IsVisible="{Binding IsBusy}"
                        Style="{StaticResource CenteredIndicatorStyle}"/>

        </StackLayout>
</ContentPage>
