<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:ServiPuntos.Mobile.Views"
    x:Class="ServiPuntos.Mobile.Views.OffersPage"
    Title="Ofertas Flash">

    <!-- Usamos un Grid con tres filas: CollectionView crece, luego botón y spinner -->
    <Grid Padding="{StaticResource PagePadding}"
          RowDefinitions="*,Auto,Auto"
          RowSpacing="{StaticResource DefaultSpacing}">

        <!-- 1) Lista de ofertas, llena & scrollable -->
        <CollectionView
            Grid.Row="0"
            ItemsSource="{Binding Offers}"
            RemainingItemsThreshold="5"
            RemainingItemsThresholdReachedCommand="{Binding LoadMoreCommand}"
            VerticalOptions="FillAndExpand">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <views:OfferItemView/>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- 2) Botón “Actualizar” -->
        <Button
            Grid.Row="1"
            Text="Actualizar"
            Command="{Binding RefreshCommand}"
            Style="{StaticResource PrimaryButtonStyle}"
            Margin="0,0,0,4"/>

        <!-- 3) Spinner centrado -->
        <ActivityIndicator
            Grid.Row="2"
            IsRunning="{Binding IsBusy}"
            IsVisible="{Binding IsBusy}"
            Style="{StaticResource CenteredIndicatorStyle}"/>

    </Grid>
</ContentPage>
