<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
       xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       x:Class="ServiPuntos.Mobile.Views.RegisterPage"
       Title="Registro">

       <!-- ScrollView para soportar pantallas pequeñas -->
       <ScrollView>
              <VerticalStackLayout
                     Padding="{StaticResource PagePadding}"
                     Spacing="{StaticResource DefaultSpacing}">

                     <!-- Encabezado -->
                     <Label
                            Text="Crear Nueva Cuenta"
                            Style="{StaticResource HeadlineLabelStyle}"/>

                     <!-- Organización / Tenant -->
                     <Label
                            Text="Organización"
                            Style="{StaticResource Body}"/>
                     <Picker
                            ItemsSource="{Binding Tenants}"
                            ItemDisplayBinding="{Binding Nombre}"
                            SelectedItem="{Binding SelectedTenant}"
                            Title="Selecciona una organización"
                            Style="{StaticResource DefaultPickerStyle}"/>

                     <!-- Nombre completo -->
                     <Label
                            Text="Nombre Completo"
                            Style="{StaticResource Body}"/>
                     <Entry
                            Text="{Binding Nombre}"
                            Placeholder="Ingresa tu nombre completo"
                            Keyboard="Text"
                            Style="{StaticResource DefaultEntryStyle}"/>

                     <!-- Cédula de Identidad -->
                     <Label
                            Text="Cédula de Identidad"
                            Style="{StaticResource Body}"/>
                     <Entry
                            Text="{Binding Ci}"
                            Placeholder="12345678"
                            Keyboard="Numeric"
                            MaxLength="8"
                            Style="{StaticResource DefaultEntryStyle}"/>

                     <!-- Email -->
                     <Label
                            Text="Email"
                            Style="{StaticResource Body}"/>
                     <Entry
                            Text="{Binding Email}"
                            Placeholder="tu@email.com"
                            Keyboard="Email"
                            Style="{StaticResource DefaultEntryStyle}"/>

                     <!-- Contraseña -->
                     <Label
                            Text="Contraseña"
                            Style="{StaticResource Body}"/>
                     <Entry
                            Text="{Binding Password}"
                            Placeholder="Mínimo 6 caracteres"
                            IsPassword="True"
                            Style="{StaticResource DefaultEntryStyle}"/>

                     <!-- Confirmar contraseña -->
                     <Label
                            Text="Confirmar Contraseña"
                            Style="{StaticResource Body}"/>
                     <Entry
                            Text="{Binding ConfirmPassword}"
                            Placeholder="Repite tu contraseña"
                            IsPassword="True"
                            Style="{StaticResource DefaultEntryStyle}"/>

                     <!-- Mensaje de error -->
                     <Label
                            Text="{Binding ErrorMessage}"
                            IsVisible="{Binding HasError}"
                            Style="{StaticResource ErrorLabelStyle}"/>

                     <!-- Botón de registro -->
                     <Button
                            Text="Registrarse"
                            Command="{Binding RegisterCommand}"
                            IsEnabled="{Binding IsRegisterEnabled}"
                            Style="{StaticResource PrimaryButtonStyle}"/>

                     <!-- Spinner de carga -->
                     <ActivityIndicator
                            IsRunning="{Binding IsLoading}"
                            IsVisible="{Binding IsLoading}"
                            Style="{StaticResource CenteredIndicatorStyle}"/>

                     <!-- Link para volver al login -->
                     <Label
                            Text="¿Ya tienes cuenta? Inicia sesión"
                            Style="{StaticResource LinkLabelStyle}">
                            <Label.GestureRecognizers>
                                   <TapGestureRecognizer Tapped="OnBackToLoginTapped"/>
                            </Label.GestureRecognizers>
                     </Label>

              </VerticalStackLayout>
       </ScrollView>
</ContentPage>
