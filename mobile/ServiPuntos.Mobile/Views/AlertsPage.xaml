<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
        xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        xmlns:views="clr-namespace:ServiPuntos.Mobile.Views"
        x:Class="ServiPuntos.Mobile.Views.AlertsPage"
        Title="Alertas">

        <Grid
                RowDefinitions="*,Auto,Auto"
                Padding="{StaticResource DefaultSpacing}">

                <CollectionView
                        Grid.Row="0"
                        ItemsSource="{Binding Notifications}"
                        RemainingItemsThreshold="5"
                        RemainingItemsThresholdReachedCommand="{Binding LoadMoreCommand}"
                        ItemsLayout="VerticalList"
                        EmptyView="{x:Null}"
                        VerticalOptions="FillAndExpand">

                        <CollectionView.EmptyView>
                                <Label
                                        Text="No hay alertas"
                                        Style="{StaticResource Caption}"
                                        HorizontalOptions="Center"
                                        VerticalOptions="CenterAndExpand"/>
                        </CollectionView.EmptyView>

                        <CollectionView.ItemTemplate>
                                <DataTemplate>
                                        <views:AlertItemView/>
                                </DataTemplate>
                        </CollectionView.ItemTemplate>
                </CollectionView>

                <Button
                        Grid.Row="1"
                        Text="Actualizar"
                        Command="{Binding RefreshCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Margin="0,12,0,0"/>

                <ActivityIndicator
                        Grid.Row="2"
                        IsRunning="{Binding IsBusy}"
                        IsVisible="{Binding IsBusy}"
                        Style="{StaticResource CenteredIndicatorStyle}"
                        Margin="0,12,0,0"/>

        </Grid>
</ContentPage>
