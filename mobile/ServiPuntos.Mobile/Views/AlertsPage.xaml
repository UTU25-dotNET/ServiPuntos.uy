<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
        xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        x:Class="ServiPuntos.Mobile.Views.AlertsPage"
        Title="Alertas">

        <!-- El padding y el background lo gestiona el estilo global de Page -->
        <StackLayout Spacing="{StaticResource DefaultSpacing}">

                <!-- Listado de alertas -->
                <CollectionView
                        ItemsSource="{Binding Notifications}"
                        EmptyView="No hay alertas"
                        ItemsLayout="VerticalList"
                        Margin="0,0,0,12">
                        <!-- antes usabas {StaticResource DefaultSpacing} -->
                        <CollectionView.ItemTemplate>
                                <DataTemplate>
                                        <!-- Card genérico -->
                                        <Frame Style="{StaticResource CardFrameStyle}">
                                                <StackLayout Spacing="{StaticResource SmallSpacing}">
                                                        <!-- Título grande -->
                                                        <Label
                                                                Text="{Binding Titulo}"
                                                                Style="{StaticResource HeadlineLabelStyle}"/>

                                                        <!-- Mensaje normal -->
                                                        <Label
                                                                Text="{Binding Mensaje}"
                                                                Style="{StaticResource Body}"/>

                                                        <Grid ColumnDefinitions="Auto,*,Auto">
                                                                <!-- Fecha en gris -->
                                                                <Label
                                                                        Text="{Binding Fecha, StringFormat='{0:g}'}"
                                                                        Style="{StaticResource Caption}"
                                                                        Grid.Column="0"/>

                                                                <!-- Relleno -->
                                                                <BoxView Grid.Column="1"/>

                                                                <!-- Estado “Leída: True/False” -->
                                                                <Label
                                                                        Text="{Binding Leida, StringFormat='Leída: {0}'}"
                                                                        Style="{StaticResource Caption}"
                                                                        Grid.Column="2"/>
                                                        </Grid>
                                                </StackLayout>
                                        </Frame>
                                </DataTemplate>
                        </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Botón primario -->
                <Button
                        Text="Actualizar"
                        Command="{Binding RefreshCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"/>

                <!-- Spinner centrado -->
                <ActivityIndicator
                        IsRunning="{Binding IsBusy}"
                        IsVisible="{Binding IsBusy}"
                        Style="{StaticResource CenteredIndicatorStyle}"/>

        </StackLayout>
</ContentPage>
